<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coming Soon</title>
    <style>
        /* --- RESET ET STYLE DE BASE --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', Courier, monospace;
        }

        body {
            background-color: #050505;
            color: #ffffff;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            flex-direction: column;
        }

        /* --- EFFET DE FOND (GRILLE CYBERPUNK) --- */
        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: 
                linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: -1;
        }

        .container {
            text-align: center;
            max-width: 700px;
            padding: 20px;
            position: relative;
            /* Suppression du background et border pour l'effet "sans cadre" */
        }

        /* --- TITRE GLITCH --- */
        .glitch {
            font-size: 3rem; /* Taille augmentée pour l'impact */
            font-weight: bold;
            position: relative;
            color: #fff;
            letter-spacing: 5px;
            margin-bottom: 30px;
            text-transform: uppercase;
        }

        /* Création des couches pour l'effet glitch */
        .glitch::before,
        .glitch::after {
            content: attr(data-text); /* Important pour le multilingue */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #050505;
        }

        .glitch::before {
            left: 2px;
            text-shadow: -1px 0 #ff00c1;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 5s infinite linear alternate-reverse;
        }

        .glitch::after {
            left: -2px;
            text-shadow: -1px 0 #00fff9;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 5s infinite linear alternate-reverse;
        }

        /* --- TEXTE --- */
        p {
            font-size: 1.1rem;
            color: #ccc;
            margin-bottom: 40px;
            line-height: 1.6;
            text-shadow: 0 0 5px rgba(0,0,0,0.8); /* Ombre pour lisibilité sans cadre */
        }

        /* --- FORMULAIRE --- */
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 500px;
            margin: 0 auto;
        }

        input[type="email"] {
            padding: 15px;
            background: rgba(17, 17, 17, 0.8); /* Légère transparence */
            border: 1px solid #444;
            color: #fff;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
            text-align: center;
            backdrop-filter: blur(2px);
        }

        input[type="email"]:focus {
            border-color: #00fff9;
            box-shadow: 0 0 15px rgba(0, 255, 249, 0.3);
        }

        button {
            padding: 15px;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #fff;
            color: #fff;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: 0.3s;
        }

        button:hover {
            background: #fff;
            color: #000;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
        }

        /* --- FEEDBACK MESSAGE --- */
        #message {
            margin-top: 20px;
            font-size: 0.9rem;
            min-height: 25px;
            font-weight: bold;
            text-shadow: 0 0 2px black;
        }
        .success { color: #00ff00; }
        .error { color: #ff0000; }

        /* --- ANIMATIONS GLITCH --- */
        @keyframes glitch-anim {
            0% { clip: rect(20px, 9999px, 81px, 0); }
            20% { clip: rect(6px, 9999px, 15px, 0); }
            40% { clip: rect(66px, 9999px, 11px, 0); }
            60% { clip: rect(35px, 9999px, 94px, 0); }
            80% { clip: rect(12px, 9999px, 58px, 0); }
            100% { clip: rect(85px, 9999px, 3px, 0); }
        }
        @keyframes glitch-anim2 {
            0% { clip: rect(30px, 9999px, 11px, 0); }
            20% { clip: rect(89px, 9999px, 45px, 0); }
            40% { clip: rect(15px, 9999px, 78px, 0); }
            60% { clip: rect(60px, 9999px, 2px, 0); }
            80% { clip: rect(4px, 9999px, 35px, 0); }
            100% { clip: rect(70px, 9999px, 99px, 0); }
        }

        /* Responsive */
        @media (min-width: 600px) {
            .input-group { flex-direction: row; }
            input[type="email"] { flex: 1; text-align: left; }
            button { width: auto; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="mainTitle" class="glitch" data-text=""></h1>
        
        <p id="descriptionText"></p>

        <form id="notifyForm" class="input-group">
            <input type="email" id="email" required>
            <button type="submit" id="submitBtn"></button>
        </form>

        <div id="message"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- 1. CONFIGURATION FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyDDPyyvh1eLsf1Juo_VvdIPMXVmWjO2hfw",
            authDomain: "site-web-travaux-en-cours.firebaseapp.com",
            projectId: "site-web-travaux-en-cours",
            storageBucket: "site-web-travaux-en-cours.firebasestorage.app",
            messagingSenderId: "714289647124",
            appId: "1:714289647124:web:320386cb94e2f4bdfce101",
            measurementId: "G-T0CCY9L12P"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- 2. GESTION DES LANGUES ---
        const translations = {
            fr: {
                title: "EN TRAVAUX",
                desc: "Nous préparons quelque chose d'unique.<br>Le site sera bientôt de retour, plus rapide et plus puissant.",
                placeholder: "Entrez votre email...",
                btn: "M'avertir",
                sending: "Envoi...",
                success: "Email enregistré. À bientôt !",
                error: "Erreur. Réessayez plus tard."
            },
            en: {
                title: "UNDER CONSTRUCTION",
                desc: "We are preparing something unique.<br>The site will be back soon, faster and stronger.",
                placeholder: "Enter your email...",
                btn: "Notify Me",
                sending: "Sending...",
                success: "Email saved. See you soon!",
                error: "Error. Please try again."
            }
        };

        // Détection de la langue du navigateur (fr ou fallback sur en)
        const userLang = navigator.language || navigator.userLanguage; 
        const langCode = userLang.startsWith('fr') ? 'fr' : 'en';
        const content = translations[langCode];

        // Application des textes
        const titleEl = document.getElementById('mainTitle');
        const descEl = document.getElementById('descriptionText');
        const emailEl = document.getElementById('email');
        const btnEl = document.getElementById('submitBtn');
        const msgEl = document.getElementById('message');

        titleEl.innerText = content.title;
        titleEl.setAttribute('data-text', content.title); // Important pour l'effet glitch
        descEl.innerHTML = content.desc;
        emailEl.placeholder = content.placeholder;
        btnEl.innerText = content.btn;

        // --- 3. SOUMISSION DU FORMULAIRE ---
        const form = document.getElementById('notifyForm');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = emailEl.value;
            
            // UI Loading
            btnEl.textContent = content.sending;
            btnEl.disabled = true;
            msgEl.textContent = "";

            try {
                await addDoc(collection(db, "newsletter"), {
                    email: email,
                    date: serverTimestamp(),
                    lang: langCode // On enregistre aussi la langue de l'utilisateur
                });

                msgEl.textContent = content.success;
                msgEl.className = "success";
                emailEl.value = "";
                btnEl.textContent = "OK";
                
            } catch (error) {
                console.error("Error: ", error);
                msgEl.textContent = content.error;
                msgEl.className = "error";
                btnEl.textContent = content.btn;
                btnEl.disabled = false;
            }
        });
    </script>
</body>
</html>
