<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Burban Loyalty</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="script.js" defer></script>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <!-- SECTION FORMULAIRE -->
    <div class="form-section">
      <div id="login-form" class="form active">
        <p class="subtitle">Nous sommes ravi de vous revoir</p>
        <h2>Se Connecter à Burban Loyalty</h2>
        <!-- Error message container -->
        <div id="login-error" class="error-message"></div>
        <form onsubmit="login(event)">
          <div class="input-group">
            <input type="email" id="login-email" required placeholder="Adresse Email" />
          </div>
          <div class="input-group password-group">
            <input type="password" id="login-password" required placeholder="Mot de passe" />
            <span class="toggle-password" onclick="togglePassword(this, 'login-password')"><i class="fa-solid fa-eye-low-vision"></i></span> <!-- Eye -->
          </div>
          <a href="#" class="forgot" onclick="openResetModal()">Mot de passe oublié ?</a>
          <br><br><button type="submit">Se connecter</button><br><br>
        </form>
        <p class="switch-form">Vous n'avez pas encore de compte ? <a href="#" onclick="switchForm('register')">Créez-le !</a></p>
      </div>

      <div id="register-form" class="form">
        <p class="subtitle">Devenez Client Burban</p>
        <h2>Inscrivez-vous chez Burban</h2>
        <div id="register-error" class="error-message"></div>
        <form onsubmit="register(event)">
          <div class="input-group"><input type="text" required id="prenom" placeholder="Prénom *" /></div>
          <div class="input-group"><input type="text" required id="nom" placeholder="Nom *" /></div>
          <div class="input-group"><input type="email" required id="register-email" placeholder="Adresse Email *" /></div>
          <div class="input-group password-group">
            <input type="password" required id="register-password" placeholder="Mot de passe *" />
            <span class="toggle-password" onclick="togglePassword(this, 'register-password')"><i class="fa-solid fa-eye-low-vision"></i></span> <!-- Eye -->
          </div>
          <div class="input-group"><input type="tel" id="phone" placeholder="Numéro de téléphone" /></div>
            Date de Naissance
          <div class="input-group"><input type="date" id="dob" placeholder="Date de naissance" /></div>
          <label class="checkbox">
            <input type="checkbox" id="newsletter" />
            Je souhaite recevoir les dernières tendances et collections Burban.
          </label>
          <br><br><button type="submit">S'inscrire</button><br><br>
        </form>
        <p class="switch-form">Je possède déjà un compte chez Burban et souhaite <a href="#" onclick="switchForm('login')">me connecter</a>.</p>
        <p class="disclaimer">En vous créant un compte chez Burban, vous acceptez toutes nos conditions sans exceptions.</p>
      </div>
    </div>

    <!-- SECTION IMAGE / VIDÉO -->
    <div class="media-section">
      <video autoplay muted loop>
        <source src="https://www.w3schools.com/howto/rain.mp4" type="video/mp4">
        Votre navigateur ne supporte pas la vidéo.
      </video>
    </div>
  </div>

  <!-- Modal Reset Password -->
  <div class="modal" id="reset-modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeResetModal()">&times;</span>
      <h3>Réinitialiser votre mot de passe</h3>
      <div id="reset-error" class="error-message"></div>
      <div id="reset-success" class="success-message"></div>
      <form onsubmit="sendResetEmail(event)">
        <input type="email" id="reset-email" placeholder="Adresse Email" required />
        <button type="submit">Envoyer le lien</button>
      </form>
    </div>
  </div>

  <!-- CLIENT SECTION -->
  <div id="client-section" class="container hidden">
    <div class="container" style="max-width:1000px; margin:auto; padding:40px">
      <h1>Bienvenue, <span id="user-name"></span></h1>

      <!-- MES INFORMATIONS -->
      <div class="section">
        <h2>Mes Informations</h2>
        <div class="info-group"><label>Prénom</label><input type="text" id="c-prenom" disabled></div>
        <div class="info-group"><label>Nom</label><input type="text" id="c-nom" disabled></div>
        <div class="info-group"><label>Email</label><input type="email" id="c-email" disabled></div>
        <div class="info-group"><label>Téléphone</label><input type="tel" id="c-phone" disabled></div>
        <div class="info-group"><label>Date de naissance</label><input type="date" id="c-dob" disabled></div>
      </div>

      <!-- MES COMMANDES -->
      <div class="section">
        <h2>Mes Commandes</h2>
        <ul id="orders-list">
          <!-- À remplacer dynamiquement -->
        </ul>
      </div>

      <!-- MES AVANTAGES -->
      <div class="section">
        <h2>Mes Avantages</h2>
        <ul>
          <li>-10% dès 3 articles</li>
          <li>1 article offert pour votre anniversaire</li>
          <li>Accès prioritaire aux nouveautés</li>
        </ul>
      </div>

      <!-- MES ABONNEMENTS -->
      <div class="section">
        <h2>Mes Abonnements</h2>
        <label class="checkbox">
          <input type="checkbox" id="c-newsletter-email" /> Newsletter Email
        </label>
        <label class="checkbox">
          <input type="checkbox" id="c-newsletter-post"  /> Newsletter Voie Postale
        </label>
      </div>

      <button class="logout-btn" onclick="logout()">Se déconnecter</button>
    </div>
  </div>
</body>
</html>
